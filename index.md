
<ul id="tree" class="ztree" style=""></ul>

<article class='markdown-body'>
#LINGX技术文档
##目标
> 简化信息管理软件开发；抛开编码细节、专注业务逻辑。

##特色
###模型驱动
数据库表和视图来创建基本的数据模型，该模型具有属性、方法、解释器、验证器、执行器、配置等子模型；此外还有高级的查询模型、克隆模型。
###在线开发
WEB在线创建和管理模型、模型的关联关系、表单控件设置、功能权限设置、数据权限设置；还有一个简易的数据库管理工具。
###级联展示
视图模板主要分两大类：列表展示与树形展示；扩展为列表级联展示与树型级联展示（支持中间表级联，一个界面现可以达到5级联）、列表选择对话框与树形选择对话框（单选、多选）。
###分级授权
通过权限配置，可以实现分级管理人员，分级管理人员有独立的组织、角色、功能、菜单；包括业务模块的功能与数据均可分级授权。
###表单控件
基于ExtJS的控件扩展，控件参数与值都是动态填充，除了文本、密码、单选、多选外，特别加入对象模型选择控件，文件上传控件。
###插件管理
1、IPlugin的execute方法实现特殊功能
2、Spring的AOP功能，接管系统接口
3、Spring注解方式实现任务调度
###事件监听
平台内部逻辑会埋下事件点，事件监听就是找到相应的事件点，实现相应的接口，现有的事件点比较少，可通过反馈快速添加。
###在线更新
平台提供了类似于windows更新中心的功能，通过在线下载、安装补丁；来修复BUG与功能改进。将来计划可通过在线订购业务包或插件包，实现按需下载。

##第三方引用
- Spring 3.2:主要应用IOC、AOP、事件、JDBC、事务管理、工作调度
- druid 1.0:数据库连接池
- fastjson 1.1：JSON格式化工具
- log4j 2.3:日志工具
- guava 18.0:内部缓存
- ExtJS 4.2:前端展示
##运行环境
- 操作系统：Windows系列/Linux系列/MacOS 32位或64位都可以
- Java环境:JDK 1.6/1.7 32位或64位都可以
- WEB容器：Tomcat 6.0/7.0 是我的开发环境，理论上 Jetty、JBoss等也是可以的，LINGX是标准Servlet 2.5工程
- 数据库:MySQL 5.5+
- 浏览器:谷歌chrome、火狐Firefox


> 我的开发环境是：win7(64位)+JDK 1.7(64位)+Tomcat 7.0+MariaDB 5.5 (64位)
# 模型架构
## 对象
### 表对象
表对象即为数据库表的对象模型，表字段为对象属性，字段名称为属性代码，字段注释为属性名称；默认情况下字段与属性一一映射，特殊情况下可以多个属性映射同一字段，或没有属性来映射这段。

在表对象生成期间会自动生成“添加、修改、删除”方法模型，来对该表数据进行增删改查。

表对象在使用列表展示模型时，有附加查询功能；该查询是组合查询，在查询关联对象只需要输关联对象的名称。

数据库表建议以“t”为前缀

### 视图对象
视图对象即为数据库视图的对象模型，只是引用对象不同。在平台的使用方式并无二致。
视图名称建议以“v” 为前缀。
 
### 查询对象
对SELECT语句进行封装，使其可查询、排序、展示
### 克隆对象
克隆对象是其他对象的完全复制品，克隆对象与原对象完全独立，在使用功能上与原对象无异；主要是对同一模型具有两种业务时进行克隆。
例如公共表附件，邮件附件与订单附件的隶属对象不一样，数据权限也不一样，所以需要克隆对象；使得在业务逻辑上是两个表，实际上是操作同一表。
克隆对象建议对象代码以“_clone”为后缀。

### 对象模型详解
- 属性	说明
- 对象代码	唯一标识
- 对象名称	对象方便展示的标识
- 对象类型	1、表对象，2、视图对象，3、查询对象、4、克隆对象
- 数据表名	映射到数据库的资源名称
- 级联对象	可以同时将有引用该对象的对象进行级联展示
- 一级级联 
`[{name:'隶属分组',entity:'tgps_cargroup_car',method:'grid',rule:''}]`

- 二级级联 `[{name:'所属用户' ,entity:'tuser',method:'grid',rule:'torguser'}]`
- 显示模式	列表展示或树型展示 grid/tree
- 目前在对象级联会用到
	

## 配置
###列表参数配置
###数据权限配置
## 属性
属性模型可以理解为数据库表字段的化身，数据元的载体；描述字段的类型、输入、输出、引用关系。

属性模型有验证器与解释器两种子模型。

主键字段/属性的字段名必须为id。

### 一般属性
一般属性是指映射到表字段且无外关联，在系统底层实现没有对其进行特殊处理；主要是对字符、数字类型进行管理。

一般属性可以添加解释器，对数据的展示进行格式转换。例如：日期的格式转换
### 对象属性
   对象属性是为表与表之间关联关系设计的属性

对象属性不可以使用解释器，平台会自动根据其引用情况自动对焦。

对象属性的输入控件有，单选、多选、列表、对话框列表选择、对话框树型选择
### 字典属性
在业务开发的过程中经常需要处理些像性别、状态。需要事先设定可选值；在LINGX中统一把这类型属性，叫字典属性。

字典属性不可以使用解释器，平台会自动根据其引用情况自动对焦。

字典属性需要在事先在系统字典表里加入要引用的字典项

以下是用户状态字段的引用情况：
输入控件为 “radio” 单选框，
控件参数为“YHZT”用户状态的代码
指向对象模型必须为“tlingx_optionitem”
### 树型属性
在一个系统中有许多树型结构的数据，LINGX为其定制了树型展示模版，同时对该数据表有一个要求，上级ID的字段名必须为“fid”；
另外有两个可选字段：1、state节点打开（open）或关闭（close）；2、iconCls节点的图标样式。
####fid 与本表的ID类型一至
####state 字符串
####iconCls 字符串

### 属性模型详解

- 属性代码	该属性的引用ID
- 映射字段	对应到数据库表字段名
- 属性名称	该属性的名称
- 数据类型	字符串或数字，主要在查询中判断是否要like
- 长度	该属性可存储字符个数，在数据输入时，做长度校验
- 不可为空	前端后端都会进行非空校验
- 输入控件	该属性采用哪种输入控件，默认是文本框
- 控件参数	部分控件支持参数设置
- 引用类型	该属性在被引用时所扮演的角色，是显示、值、无关；默认情况下显示与值都是id
- 指向对象模型	该属性引用的对象模型
- 是否可用	是否在编辑界面中可用
- 是否可见	是否在列表界面中可见
- 字段同步	在修改同一对象下同名属性（对象属性和方法属性）时是否同步和被同步
- 默认值	在编辑时的默认值
- 
## 方法
方法模型代表着一个事件处理；例如：用户列表查询、添加用户、JSP界面跳转；描述事件的处理方式。

方法模型有两个子模型属性和执行器。

### JSON方法
在一个REQUEST请求处理完成后返回JSON格式数据。大部分方法是JSON方法。
 
当JSON没有方法属性时，直接后台执行该方法。

### JSP方法
在一个REQUEST请求处理完在后返回JSP界面，通常在自定义开发中会用到。
### URL方法
该方法重定向到设置的URL。如下图重定向到百度
### JavaScript方法
在一个REQUEST请求处理完成后，返回JavaScript，并执行。
### 默认生成方法
- 	对象添加add
- 	对象修改edit
- 	对象删除del

### 默认实现方法
- 对象展示view
- 对象列表grid
- 对象树型tree
- 对象选择combo
- 对话框列表选择combogrid2
- 对话框树型选择combotree2

### 方法模型详解
- 方法代码	该方法调用的唯一标识
- 方法名称	对外显示的名称
- 是否验证	是否启用验证，默认启用
- 当前记录	是否需要当前记录作为参数
- 是否可见	是否可见
- 是否可用	是否可用，与是否可见的区别是，不可用将显示灰色不可点击的按钮
- 返回类型	返回类型json,jsp,javascript,url对应以上的四种方法

## 验证器
验证器模型是在数据表单提交时，进行数据是否合格的检查；不合格将不作处理。属于属性模型的子模型。
### 表达式验证器
默认验证器，需要在表达式
### 不为空验证器
### 正则验证器
### 电子邮箱验证器
### 两数字之间
### 数字不大于{}
### 数字不小于{}
### 数字验证
### 字符串长度在两数字之间
### 字符串长度不大于{}
### 字符串长度不小于{}
### 唯一验证
### 自定义验证器
## 解释器
### 表达式验证器
### 日期解释器1
将20150716220123转为2015-07-16
### 日期解释器2
将20150716220123转为2015-07-16 22:02:23
### 自定义解释器
## 执行器
###表达式执行器
###对象视图展示执行器
###列表数据展示执行器
###树形数据展示执行器
###选择数据获取执行器
###自定义执行器
# 视图模版
## 列表模版
## 树形模版
## 列表级联
## 树形级联
## 多重级联
# 表单控件
## 文本
### 单行文本
### 多行文本
## 密码
## 单选
## 多选
## 数字
## 日期
## 只读
## 文件
## 对话框
### 列表单选对话框
### 列表多选对话框
### 树形单选对话框
### 树形多选对话框
# 权限管理
## 功能权限
###模型操作权限
###JSP扩展权限
## 数据权限
###横向数据权限
###纵向数据权限
##分级授权
### 组织授权
### 角色授权
### 菜单授权
### 功能授权
#开发环境
## 本地开发-Eclipse
### 创建Web项目
### 下载并导入相关jar
### 安装数据库
### 配置数据库
## 在线开发-WEB
### 创建对象
#插件管理
## 插件安装
## 插件配置
## 插件开发
###IPlugin接口的execute方法
###AOP切面编程
###工作调度@Scheduled
# 在线更新

 </article>
<script type="text/javascript" src="javascripts/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="javascripts/jquery.ztree.core-3.5.min.js"></script>
<script type="text/javascript" src="javascripts/ztree_toc.js"></script>
<link rel="stylesheet" href="stylesheets/zTreeStyle/zTreeStyle.css" type="text/css">

<SCRIPT type="text/javascript" >
 $(document).ready(function(){ $('#tree').ztree_toc({
 is_auto_number:true, 
is_highlight_selected_line:false,
documment_selector:'.markdown-body', 
ztreeStyle: { width:'260px', overflow: 'auto', position: 'fixed', 'z-index': 2147483647, border: '0px none', left: '0px', top: '0px' } 
}); });
</SCRIPT> 
